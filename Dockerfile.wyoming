FROM alumae/kiirkirjutaja:latest

# Install Wyoming protocol
RUN pip install wyoming>=1.5.0

# Copy our modified files
COPY main.py /opt/kiirkirjutaja/
COPY asr.py /opt/kiirkirjutaja/
COPY wyoming_handler.py /opt/kiirkirjutaja/

WORKDIR /opt/kiirkirjutaja

# Wyoming server port
EXPOSE 10300

CMD ["python", "main.py", "--wyoming-uri", "tcp://0.0.0.0:10300"]
